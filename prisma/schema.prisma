// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("mongo_connect")
}

model users {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  username  String    @unique
  password  String
  name      String
  photo     String
  link      link[]
  token     token[]
  createAt  DateTime  @default(now())
  deletedAt DateTime?

  userAgent String
  ip        String
}

model token {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  token     String   @unique
  date      DateTime @default(now())
  // **** 
  userAgent String
  ip        String
  // ****
  author    users    @relation(fields: [autherId], references: [id])
  autherId  String   @db.ObjectId
}

model link {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  name         String    @unique
  descript     String
  imgUrl       String
  url          String
  autoRedirect Boolean
  cooldown     Int       @default(0)
  password     String?
  view         Int       @default(0)
  author       users     @relation(fields: [authorId], references: [id])
  authorId     String    @db.ObjectId
  createdAt    DateTime  @default(now())
  deletedAt    DateTime?
}
